@page "/reporteVentas"

@inject IService service
@inject IJSRuntime js
@inject NavigationManager navigate

<div class="row">
    <div class="col">
        <button onclick="crearPDFReporteVentas()" class="btn btn-outline-primary">
            <i class="bi bi-cloud-download-fill mr-2"></i>Guardar Reporte
        </button>
    </div>
</div>
<div id="factura">
    <header>
        <div id="logo">
            <img src="data:image/jpeg;base64,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" id="imagen">
        </div>
        <div id="datos">
            <p id="encabezado">
                <b>Dulceria Yohany</b><br>Jinotepe, Carazo<br>Telefono:(+505)85487678<br>Email:dulceria.ad7@gmail.com
            </p>
        </div>
        <div id="fact">
            <p>
                Reporte de ventas del dia<br>
                @DateTime.Now.ToString("dd/MM/yyyy hh:mm tt")<br>
            </p>
        </div>
    </header>
    <br>
    <section>
        <div>

        </div>
    </section>
    <br>
    <section>
        <div>
            <table id="facarticulo">
                <thead>
                    <tr id="fa">
                        <th>CLIENTE</th>
                        <th>CANTIDAD DE ARTICULOS</th>
                        <th>SUBTOTAL</th>
                        <th>DESC.</th>
                        <th>TOTAL</th>
                    </tr>
                </thead>
                <tbody style="border-bottom: 1px solid black">
                    @foreach (var item in VentasVM)
                        {
                            <tr style="border-bottom: 1px solid #57555529">
                                <th>@item.Cliente.Nombre</th>
                                <th>@item.CantidadArticulos</th>
                                <th style="text-align:right;">@item.SubTotal</th>
                                <th style="text-align:right;">@item.Descuento</th>
                                <th style="text-align:right;">@item.Total</th>
                            </tr>
                        }
                </tbody>
                <tfoot>
                    @*<tr>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th style="text-align:right;">Subtotal</th>
                        <th style="text-align:right;">@VentasVM.Sum(X => X.SubTotal)</th>
                    </tr>
                    <tr>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th style="text-align:right;">Descuento</th>
                        <th style="text-align:right;">@VentasVM.Sum(x => x.Descuento)</th>
                    </tr>*@
                    <tr>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th style="text-align:right; font-weight:800">Total</th>
                        <th style="text-align:right;">@VentasVM.Sum(x => x.Total)</th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </section>
    <br>
    <br>
    <footer>
        <div id="gracias">

        </div>
    </footer>
</div>

@code {
    List<VentaViewModel> VentasVM = new List<VentaViewModel>();

    DateTime fecha;

    protected override void OnInitialized()
    {
        try
        {
            VentasVM = service.ObtenerVentasDeDia();
            fecha = DateTime.Now;
        }
        catch (Exception e)
        {
            e.Message.ToString();
        }
    }

}
